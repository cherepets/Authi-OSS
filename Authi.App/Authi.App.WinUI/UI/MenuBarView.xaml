<UserControl
    x:Class="Authi.App.WinUI.UI.MenuBarView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
    xmlns:controls="using:Authi.App.WinUI.Controls"
    xmlns:l10n="using:Authi.App.Logic.Localization">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="TitleBarFirstColumn" Width="360" />
            <ColumnDefinition x:Name="TitleBarSecondColumn" Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition x:Name="AppTitleRow" Height="48" />
            <RowDefinition x:Name="MenuButtonsRow" Height="Auto" />
        </Grid.RowDefinitions>
        <controls:ProgressBar
            x:Name="ProgressBar"
            Grid.Row="2"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Bottom" />
        <Border
            Grid.RowSpan="2"
            Grid.ColumnSpan="2"
            Margin="0,0,0,2"
            Background="{ThemeResource TitleBarBackgroundBrush}" />
        <Grid Grid.Row="2" Margin="0,-12,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <StackPanel Margin="0,0,0,6" Orientation="Horizontal">
                <FontIcon
                    Margin="16,0,0,0"
                    FontSize="16"
                    Foreground="{x:Bind ViewModel.SyncViewModel.Status, Converter={StaticResource SyncStatusToColor}, Mode=OneWay}"
                    Glyph="&#xEC43;" />
                <TextBlock
                    Margin="16,0,16,1"
                    VerticalAlignment="Center"
                    Style="{ThemeResource BodyTextBlockStyle}"
                    Text="{x:Bind ViewModel.SyncViewModel.Status, Converter={StaticResource SyncStatusToTitle}, Mode=OneWay}" />
            </StackPanel>
            <StackPanel
                Grid.Column="1"
                Margin="0,0,4,6"
                Orientation="Horizontal"
                Spacing="4">
                <Button
                    Height="40"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Click="OnAddNewClicked"
                    Style="{ThemeResource AccentButtonStyle}">
                    <StackPanel
                        Margin="0,2,0,0"
                        Orientation="Horizontal"
                        Spacing="8">
                        <FontIcon
                            VerticalAlignment="Center"
                            FontSize="20"
                            Glyph="&#xE710;" />
                        <TextBlock
                            Margin="0,0,0,1"
                            Style="{ThemeResource BodyTextBlockStyle}"
                            Text="{x:Bind l10n:Credential.AddNewButton}" />
                    </StackPanel>
                </Button>
                <AppBarSeparator />
                <Button
                    Padding="10"
                    Click="OnSettingsClicked"
                    Style="{ThemeResource TransparentIconButtonStyle}">
                    <AnimatedIcon>
                        <AnimatedIcon.Source>
                            <animatedvisuals:AnimatedSettingsVisualSource />
                        </AnimatedIcon.Source>
                    </AnimatedIcon>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
